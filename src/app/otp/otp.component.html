
<app-navbar></app-navbar>
<div #sucess class="success alert-success success-dismissible fade show" role="alert">
	<button type="button" class="close" aria-label="Close" >
	  <span aria-hidden="true">&times;</span>
	</button>
	<!-- <strong>Login Successful!</strong> User Access Level: {{utype}} User | MSISDN : {{msisdn}} -->
	<strong>Login Successful!</strong> User Access Level: Admin
  </div>
  <h6 class="p-3"><a style="background-color:#dd49b6; color: rgb(247, 242, 246); font-size: x-large;" href="javascript:history.go(-1);">Go Back</a></h6>   
<div class="p-3">
	<div class="row">
		<!-- Filters -->
		
		<div class="col-md-2" >
			<h3>Filters</h3>
			<br />
			<div class="p-3">
				<strong>Filter eKYC Records</strong>
				<hr />
				<a href="#">Choose Date</a>
				<input class="form-control" placeholder="Search" type="date" [(ngModel)]="dateStr" (change)="getRecords('')">
				<br />
				<a href="#">Enter Token#</a>
				<input class="form-control" placeholder="Search" type="text" [(ngModel)]="searchString">
			</div>
		</div>
	
		<!-- Main Content + Detail View -->
		<div class="col-md-10">
			<div class="row p-0">
				<div class="col">

					<!-- Alerts Table -->
					<div class="row">
						<div class="col-md-6">
							 <h3 class="p-3">OTP Management</h3>
						</div>
						<div class="col-md-5 p-3">
							<!-- <h5 class="p-3">Welcome {{fullName}}! | Your Total Activations ({{activations}}) | <a href="/">Logout</a></h5>  -->
							<h5 class="p-3"><a href="/ekyc-bo">Logout</a></h5> 

						</div>
						<div class="col-md-5 p-3">
							<input class="form-control" placeholder="Search" type="text" [(ngModel)]="searchString">
							<button  class="mt-1 btn btn-success" (click)="refresh()">Refresh</button>
						</div>
						
					</div>
					<div class="alert alert-danger" role="alert" *ngIf="errorMsg!=''">
						<label class="mt-1 mb-2 pb-1">{{errorMsg}}</label>
					  </div>
					<div class="alert alert-success" role="success" *ngIf="isLoading">
						<label class="mt-1 mb-2 pb-1">Please wait data loading...</label>
					  </div>
					<!--<div class="d-flex justify-content-center">
						<div class="spinner-border" role="status">
						  <span class="sr-only">Loading...</span>
						</div>
					  </div> -->
					  
					<div >
						
						<table style="table-layout: fixed ; width: 100%;" class="table table-hover table-striped">
							<thead>
								<tr>
									<!-- <th scope="col">ApplnId</th> -->
									<th scope="col">OTP Id</th>									
									<th scope="col">MSISDN</th>									
									<th scope="col">OTP</th>									
									<th scope="col">OTP Validity</th>
									<th scope="col">MPIN</th>
									<th scope="col">Is Active</th>
									<th scope="col">Token</th>
                  <th scope="col">Generate OTP</th>
							
								</tr>
							</thead>
							<tbody>
								<tr *ngFor="let alert of alerts  | table: searchString"
									(click)="openDetails(alert)"
									[ngClass]="{'table-primary': alert.ApplicationId == detailAlert?.ApplicationId}">
               
									<td>{{alert.id}}</td>
									<td>{{alert.msisdn}}</td>									
									<td>{{alert.otp}}</td>									
									<td>{{alert.otpValidity}}</td>
									<td>{{alert.mpin}}</td>
									<td>{{alert.isActive}}</td>
									<td>{{alert.token}}</td>
                  <td><label class="text-primary config" (click)="generateOtp(alert.msisdn)">Generate OTP</label></td>
								
									
             
								</tr>
							</tbody>
							<!-- <pagination [totalItems]="(alerts | table: searchString)?.length || 0"
								[(ngModel)]="currentPage"></pagination> -->
						</table>
					
					</div>
					<!-- End of Alerts Table -->

				</div>

		</div>
	</div>
</div>







  
